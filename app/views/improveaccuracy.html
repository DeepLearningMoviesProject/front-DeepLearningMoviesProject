<div layout-fill layout="column">
  <!-- Main toolbar -->
  <md-toolbar class="md-whiteframe-z1 slideTopToBottom">
    <div class="md-toolbar-tools">
      <!-- Hamburger icon -->
      <md-button class="md-icon-button" ng-click="toggleSidenav('left')" hide-gt-md aria-label="Menu">
        <md-icon md-svg-icon="navigation:ic_menu_24px" aria-label="Menu"></md-icon>
      </md-button>
      <h3>
        Améliorer mes prédictions
      </h3>
      <span flex></span>

      <!-- Search and menus icons -->
      <md-button class="md-icon-button" aria-label="Search" ng-click="toggleSearch()">
        <md-icon md-svg-icon="action:ic_search_24px" aria-label="Search"></md-icon>
      </md-button>
      <md-button class="md-icon-button" aria-label="Open Settings" ng-click="showListBottomSheet($event)">
        <md-icon md-svg-icon="navigation:ic_more_vert_24px" aria-label="More"></md-icon>
      </md-button>
    </div>
  </md-toolbar>


  <!-- Content -->
  <md-content layout-padding ng-cloak>

    <div ng-show="!loadingBar || firstLoad" layout="row" class="slideBottomToTop"> 
      <span flex></span>   
      <!-- <md-card id="searchMovieCard" flex="50" layout="row">
      </md-card> -->
        <form flex="50" ng-submit="searchMovieByName(nameSearchMovie)" name="searchMovieForm" layout="row">
          <md-input-container layout-fill class="md-icon-float md-block">
            <!-- Use floating label instead of placeholder -->
            <label>&nbsp;</label>
            <md-icon md-svg-icon="action:ic_search_24px" aria-label="movie search"></md-icon>
            <input style="font-size:22px; margin-bottom: -15px; margin-top: 5px" ng-model="nameSearchMovie" type="search" placeholder="Rechercher un film">
          </md-input-container>
          <!-- <md-button ng-show="nameSearchMovie" ng-click="searchMovieByName(nameSearchMovie)" class="md-raised" aria-label="description" md-ripple-size="auto">Rechercher le film</md-button> -->
        </form>
        <md-button flex="none" ng-click="discoverMovies()" class="md-raised" aria-label="description" md-ripple-size="auto">
          <md-icon md-svg-icon="av:ic_shuffle_24px"></md-icon>
        </md-button>
        <md-button flex="none" ng-disabled="globalPage <= 1" ng-click="discoverMovies(-1)" class="md-raised" aria-label="description" md-ripple-size="auto">
          <md-icon md-svg-icon="image:ic_navigate_before_24px"></md-icon>
        </md-button>
        <md-button flex="none" ng-disabled="globalPage >= 1000" ng-click="discoverMovies(1)" class="md-raised" aria-label="description" md-ripple-size="auto">
          <md-icon md-svg-icon="image:ic_navigate_next_24px"></md-icon>
        </md-button>
      <span flex></span>
    </div>
    <!-- <md-card>
      <h1>Améliorer mes prédictions</h1>
      <p>Ameliorez vos prédictions notant d'autre films !</p>
    


    </md-card> -->

    <div ng-show="!loadingBar" class="searchedMoviesCardContainer animate-show-in" layout-wrap layout="row" layout-align="space-around center" data-images-loaded>
      <md-card class="searchedMoviesCard" ng-repeat="movieSearched in moviesSearched.results | orderBy:'popularity':true">
        <img ng-click="showMovieDetailsDialog($event, movieSearched.id)" class="searchMoviesBackdropPath" ng-if="movieSearched.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movieSearched.backdrop_path}}"/>
        <img ng-click="showMovieDetailsDialog($event, movieSearched.id)" class="searchMoviesBackdropPath" ng-if="!movieSearched.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"/>
        <md-card-actions layout="row" layout-align="start center">
          <div layout="column" flex="70">
            <span class="headline">{{movieSearched.title}}</span>
            <span class="subline">{{movieSearched.vote_average}} <span style="font-size: 16px">★</span></span>
          </div>
          <span flex></span>
          <md-button flex="none" ng-click="evaluateMovies(movieSearched.id, 1)" class="md-icon-button" aria-label="like" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 1 ? 'md-primary' : ''">
            <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon>
          </md-button>
          <md-button md-theme="redTheme" flex="none" ng-click="evaluateMovies(movieSearched.id, 0)" class="md-icon-button" aria-label="dislike" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 0 ? 'md-primary' : ''">
            <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon>
          </md-button>
        </md-card-actions>
      </md-card>

    </div>
    <div ng-show="!loadingBar" id="bottomImproveAccuracyNavigation" layout="center center">
      <md-button flex="none" ng-click="discoverMovies()" class="md-raised" aria-label="description" md-ripple-size="auto">
        <md-icon md-svg-icon="av:ic_shuffle_24px"></md-icon>
      </md-button>
      <md-button flex="none" ng-disabled="globalPage <= 1" ng-click="discoverMovies(-1)" class="md-raised" aria-label="description" md-ripple-size="auto">
        <md-icon md-svg-icon="image:ic_navigate_before_24px"></md-icon>
      </md-button>
      <md-button flex="none" ng-disabled="globalPage >= 1000" ng-click="discoverMovies(1)" class="md-raised" aria-label="description" md-ripple-size="auto">
        <md-icon md-svg-icon="image:ic_navigate_next_24px"></md-icon>
      </md-button>
    </div>



    <md-card ng-show="moviesSearched && false">
    	<!-- <img class="md-card-image" src="card-image.png" alt="image caption"> -->
    	<md-list>
				<md-list-item class="md-2-line" ng-repeat="movieSearched in moviesSearched.results | orderBy:'popularity':true">
					<!-- <md-icon class="taskNotOk" md-svg-icon="alert:ic_error_24px" aria-label="task not ok icon"></md-icon> -->
          <img class="searchMoviesPosterPath" ng-if="movieSearched.poster_path" ng-src="https://image.tmdb.org/t/p/w92/{{movieSearched.poster_path}}"/>
          <img class="searchMoviesPosterPath" ng-if="!movieSearched.poster_path" ng-src="http://school4schools.com/blog/wp-content/plugins/lightbox/images/No-image-found.jpg"/>
					<div class="md-list-item-text compact">
						<h3>{{movieSearched.title}}</h3>
						<p>{{movieSearched.vote_average}}/10</p>
					</div>
          <div layout="column">
            <md-button ng-click="evaluateMovies(movieSearched.id, 1)" class="md-icon-button" aria-label="Favorite" flex="none" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 1 ? 'md-primary' : ''">
              <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon>
            </md-button>
            <span flex="grow"></span>
            <md-button ng-click="evaluateMovies(movieSearched.id, 0)" class="md-icon-button" aria-label="Favorite" flex="none" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 0 ? 'md-primary' : ''">
              <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon>
            </md-button>
          </div>
					<md-divider ng-if="!$last"></md-divider>
				</md-list-item>
    	</md-list>
    </md-card>


    <!-- Image preloading -->
    <div id="preloaded-images">
      <img ng-repeat="movie in moviesSearched.results" ng-src="https://image.tmdb.org/t/p/w185/{{movie.poster_path}}" width="1" height="1" alt="" />
    </div>

  </md-content>
</div>
