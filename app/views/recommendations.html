<div layout-fill layout="column">
  <!-- Main toolbar -->
  <md-toolbar class="md-whiteframe-z1 slideTopToBottom">
    <div class="md-toolbar-tools">
      <!-- Hamburger icon -->
      <md-button class="md-icon-button" ng-click="toggleSidenav('left')" hide-gt-md aria-label="Menu">
        <md-icon md-svg-icon="navigation:ic_menu_24px" aria-label="Menu"></md-icon>
      </md-button>
      <h3>
        Mes recommandations
      </h3>
      <span flex></span>

      <!-- Search and menus icons -->
      <!-- <md-button class="md-icon-button" aria-label="Search" ng-click="testIdFunction()">
        <md-icon md-svg-icon="action:ic_search_24px" aria-label="Search"></md-icon>
      </md-button>
      <md-button class="md-icon-button" aria-label="Open Settings" ng-click="showListBottomSheet($event)">
        <md-icon md-svg-icon="navigation:ic_more_vert_24px" aria-label="More"></md-icon>
      </md-button> -->
    </div>
  </md-toolbar>


  <!-- Content -->
  <md-content layout-padding ng-cloak>

  <md-tabs md-dynamic-height md-border-bottom>
      <md-tab label="Parce que les autres ont aimé...">
        <md-content class="md-padding">
        <md-card ng-show="!moviesEvaluation.size && !loadingBar">
		    	<md-card-title>
		        <md-card-title-text>
		          <span class="md-headline"><b>Aucune donnée disponible</b></span>
		          <span class="md-subhead">Vous n'avez annoté aucun film, rendez-vous dans la catégorie "Améliorer mes prédictions" <span style="font-size: 20px;">☺</span></span>
		        </md-card-title-text>
		      </md-card-title>
		    </md-card>
        <md-card ng-show="loadingPredictionsFM">
			      <md-card-title>
			        <md-card-title-text>
			          <span class="md-headline"><b>Vos prédictions sont en cours de chargement</b></span>
			          <span class="md-subhead">Revenez dans quelques instants</span>
			        </md-card-title-text>
			      </md-card-title>
			      <!-- <md-card-content>
			        <p>
			          Rendez-vous dans la <b>page "Améliorer mes prédictions"</b> et annotez des films en cliquant sur les petits pouces.
			          Le <b>"thumb up" bleu indique que vous aimez ce film</b>, le <b>"thumb down" rouge indique lui que vous n'aimez pas celui-ci</b> (ou que vous ne souhaitez pas le voir). 
			        </p>
			      </md-card-content> -->
			  	</md-card>

			  	<div ng-show="!loadingPredictionsFM" class="searchedMoviesCardContainer animate-show-in" layout-wrap layout="row" layout-align="space-around center" data-images-loaded>
			      <md-card class="searchedMoviesCard" ng-repeat="movie in allMovies | orderBy:'accuracy':true">
			        <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="movie.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movie.backdrop_path}}"/>
			        <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="!movie.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"/>
			        <div class="sentimentAnalysis" layout="row" layout-align="end start">
			          <md-button ng-if="popularity[movie.id].pop * Math.max(1, movie.popularity) > 200" md-theme="blueTheme" flex="none" class="md-fab md-mini md-primary" aria-label="popular on twitter">
			            <md-tooltip>On en parle sur Twitter {{popularity[movie.id].pop}} tweets</md-tooltip>
			            <md-icon md-svg-icon="toggle:ic_star_24px"></md-icon>
			          </md-button>
			          <md-button ng-if="popularity[movie.id].sentiment > 0.5" md-theme="redTheme" flex="none" class="md-fab md-mini md-primary" aria-label="liked on twitter">
			          	<md-tooltip>Coup de coeur Twitter !</md-tooltip>
			            <md-icon md-svg-icon="action:ic_favorite_24px"></md-icon>
			          </md-button>
			        </div>
			        <div ng-show="moviesCurrentlyUpdated.has(movie.id)" class="progressContainer">
			          <div class="searchMoviesBackdropPath loadingSearchMoviesCard">
			            <md-progress-circular class="progressCircularSearchMoviesCard" md-mode="indeterminate"></md-progress-circular>
			          </div>
			        </div>
			        <md-card-actions layout="row" layout-align="start center">
			          <div layout="column" flex="70">
			            <span class="headline">{{movie.title}} <span ng-if="movie.release_date">({{movie.release_date | limitTo:4}})</span></span>
			            <span class="subline">{{movie.vote_average}} <span style="font-size: 16px">★</span> - {{predictionsFM[movie.id]*100 | number:0}}%</span>
			          </div>
			          <span flex></span>
			          <md-button md-theme="blueTheme" flex="none" ng-click="evaluateMovies(movie.id, 1)" class="md-icon-button" aria-label="like" ng-class="moviesEvaluation.get(movie.id.toString()) === 1 ? 'md-primary' : ''" ng-disabled="moviesCurrentlyUpdated.has(movie.id)">
			            <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon>
			          </md-button>
			          <md-button md-theme="redTheme" flex="none" ng-click="evaluateMovies(movie.id, 0)" class="md-icon-button" aria-label="dislike" ng-class="moviesEvaluation.get(movie.id.toString()) === 0 ? 'md-primary' : ''" ng-disabled="moviesCurrentlyUpdated.has(movie.id)">
			            <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon>
			          </md-button>
			        </md-card-actions>
			      </md-card>

			    </div>
        	
        </md-content>
      </md-tab>
      <md-tab label="Découvertes">
        <md-content class="md-padding">
          <md-card ng-show="loadingPredictionsFirstClassifier">
			      <md-card-title>
			        <md-card-title-text>
			          <span class="md-headline"><b>Vos prédictions sont en cours de chargement</b></span>
			          <span class="md-subhead">Revenez dans quelques instants</span>
			        </md-card-title-text>
			      </md-card-title>
			      <!-- <md-card-content>
			        <p>
			          Rendez-vous dans la <b>page "Améliorer mes prédictions"</b> et annotez des films en cliquant sur les petits pouces.
			          Le <b>"thumb up" bleu indique que vous aimez ce film</b>, le <b>"thumb down" rouge indique lui que vous n'aimez pas celui-ci</b> (ou que vous ne souhaitez pas le voir). 
			        </p>
			      </md-card-content> -->
			  	</md-card>

			  	<div ng-show="!loadingBar" class="searchedMoviesCardContainer animate-show-in" layout-wrap layout="row" layout-align="space-around center" data-images-loaded>
			      <md-card class="searchedMoviesCard" ng-repeat="movie in predictions | orderBy:'accuracy':true">
			        <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="movie.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movie.backdrop_path}}"/>
			        <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="!movie.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"/>
			        <div class="sentimentAnalysis" layout="row" layout-align="end start">
			          <md-button ng-if="popularity[movie.id].pop * Math.max(1, movie.popularity) > 200" md-theme="blueTheme" flex="none" class="md-fab md-mini md-primary" aria-label="popular on twitter">
			          	<md-tooltip>On en parle sur Twitter {{popularity[movie.id].pop}} tweets</md-tooltip>
			            <md-icon md-svg-icon="toggle:ic_star_24px"></md-icon>
			          </md-button>
			          <md-button ng-if="popularity[movie.id].sentiment > 0.5" md-theme="redTheme" flex="none" class="md-fab md-mini md-primary" aria-label="liked on twitter">
			          	<md-tooltip>Coup de coeur Twitter !</md-tooltip>
			            <md-icon md-svg-icon="action:ic_favorite_24px"></md-icon>
			          </md-button>
			        </div>
			        <div ng-show="moviesCurrentlyUpdated.has(movie.id)" class="progressContainer">
			          <div class="searchMoviesBackdropPath loadingSearchMoviesCard">
			            <md-progress-circular class="progressCircularSearchMoviesCard" md-mode="indeterminate"></md-progress-circular>
			          </div>
			        </div>
			        <md-card-actions layout="row" layout-align="start center">
			          <div layout="column" flex="70">
			            <span class="headline">{{movie.title}} <span ng-if="movie.release_date">({{movie.release_date | limitTo:4}})</span></span>
			            <span class="subline">{{movie.vote_average}} <span style="font-size: 16px">★</span> - {{movie.accuracy*100 | number:0}}%</span>
			          </div>
			          <span flex></span>
			          <md-button md-theme="blueTheme" flex="none" ng-click="evaluateMovies(movie.id, 1)" class="md-icon-button" aria-label="like" ng-class="moviesEvaluation.get(movie.id.toString()) === 1 ? 'md-primary' : ''" ng-disabled="moviesCurrentlyUpdated.has(movie.id)">
			            <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon>
			          </md-button>
			          <md-button md-theme="redTheme" flex="none" ng-click="evaluateMovies(movie.id, 0)" class="md-icon-button" aria-label="dislike" ng-class="moviesEvaluation.get(movie.id.toString()) === 0 ? 'md-primary' : ''" ng-disabled="moviesCurrentlyUpdated.has(movie.id)">
			            <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon>
			          </md-button>
			        </md-card-actions>
			      </md-card>

			    </div>
        </md-content>
      </md-tab>
    </md-tabs>

  	


   <!--  <md-subheader class="md-primary">Affichage 2</md-subheader>

    <md-grid-list md-cols="2" md-cols-sm="3" md-cols-md="4" md-cols-gt-md="5" md-row-height="780:439" md-gutter="8px" md-gutter-gt-sm="4px" data-images-loaded>

	    <md-grid-tile ng-repeat="movie in predictions" 
	    	md-rowspan="{{computeWidth(movie.accuracy, 1, 2, minAccuracy, maxAccuracy)}}" md-colspan="{{computeWidth(movie.accuracy, 1, 2, minAccuracy, maxAccuracy)}}" 
	    	md-colspan-xs="1" md-colspan-xs="1" 
	    	md-rowspan-sm="{{computeWidth(movie.accuracy, 1, 3, minAccuracy, maxAccuracy)}}" md-colspan-sm="{{computeWidth(movie.accuracy, 1, 3, minAccuracy, maxAccuracy)}}"
	    	md-rowspan-md="{{computeWidth(movie.accuracy, 1, 4, minAccuracy, maxAccuracy)}}" md-colspan-md="{{computeWidth(movie.accuracy, 1, 4, minAccuracy, maxAccuracy)}}"
	    	md-rowspan-gt-md="{{computeWidth(movie.accuracy, 1, 5, minAccuracy, maxAccuracy)}}" md-colspan-gt-md="{{computeWidth(movie.accuracy, 1, 5, minAccuracy, maxAccuracy)}}">
	      <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="movie.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movie.backdrop_path}}" layout-fill/>
        <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="!movie.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"/>
	      <md-grid-tile-footer><h3>{{movie.title}}</h3></md-grid-tile-footer>
	    </md-grid-tile>
	  </md-grid-list> -->


    <!-- Image preloading -->
    <div id="preloaded-images">
      <img ng-if="movie.poster_path" ng-repeat="movie in predictions" ng-src="https://image.tmdb.org/t/p/w185/{{movie.poster_path}}" width="1" height="1" alt="" />
    </div>

  </md-content>
</div>
